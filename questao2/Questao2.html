<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <!--<script src="desafio2.js"></script>-->
    <script>
        var letras = "abcdefghijklmnopqrstuvwxyz";
        var charSpecial = "!@#$%^&*()-+";
        const tamanho = 6;
        var str = prompt('Insira a sua senha:');
        var validacao = validarString(str, tamanho);
        
        var strComplemento = "";
       document.write('<pre>')
        if (validacao.completa){
            document.write("Parabéns, sua senha é segura!")
        } else {
            document.write("Para ser segura, sua senha deve ter mais: <br>")
            if (!validacao.tamanho){
                document.write(`Pelo menos mais  ${tamanho-str.length} digito(s).<br>`);
            } 
            if(!validacao.numero){
              strComplemento += randomInt(0, 9);
              document.write(`Pelo menos um número inteiro.<br>`)  
            }
            if(!validacao.charSpecial){
                strComplemento += charSpecial[randomInt(0, 11)];
                document.write(`Pelo menos um caractere especial.<br>`)
            }
            if(!validacao.minuscula){
                strComplemento += letras[randomInt(0, 25)];
                document.write(`Pelo menos uma letra minuscula.<br>`)
            }
            if(!validacao.maiuscula){
                strComplemento += letras[randomInt(0, 25)].toUpperCase();
                document.write(`Pelo menos uma letra maiuscula.<br>`)
            }
            aux = str.length + strComplemento.length;
            while(aux<tamanho){
                strComplemento+= letras[randomInt(0, 25)];
                aux++
            }
            document.write(`Como sugestão, acrescente os ${strComplemento.length} caracteres: ${strComplemento} <br>`)
        }
        
        document.write('</pre>')  
    

// Seria mais aproriado escrever o código a seguir em um outro módulo, porém por conveniencia de manter no mesmo arquivo foi escrito abixo.

function validarString(str, tam){
    dataVal = [];
        dataVal['completa']=false
        dataVal['tamanho']=false
        dataVal['numero']=false
        dataVal['minuscula']=false
        dataVal['maiuscula']=false
        dataVal['charSpecial']=false
    
    if (str.length>=tam){
        dataVal.tamanho=true;
    }
    for (var i in str){
        
        if (!isNaN(str[i])){
            dataVal.numero = true;
        } else if (charSpecial.indexOf(str[i])>0){
            dataVal.charSpecial=true;
        }  else if (str[i]===str[i].toUpperCase()){
            dataVal.maiuscula = true;
        } else if (str[i]===str[i].toLowerCase()){
            dataVal.minuscula = true;
        }
        if (dataVal.tamanho && dataVal.numero && dataVal.minuscula && dataVal.maiuscula && dataVal.charSpecial){
            dataVal.completa = true;
            return dataVal;
        }
    }
    return dataVal;
}

function randomInt(min, max) {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min)) + min;
  }




    /*
        var str = prompt('Insira a palavra:');
        if (validacao(str)){
            document.write({6-str.length);

        } else {
            document.write(`Sua senha é segura`);
        }
    */
    </script>
</body>
</html>